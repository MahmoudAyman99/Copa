<section >
    <app-navbar></app-navbar>
    <div class="all">
        <div class="container  d-flex justify-content-center">
            <div class="position-relative layer ">
                <img src="assets/images/copa logo (1).jpeg" alt="copa logo" class=" w-100  rounded-4">
                <div class="form-layer position-absolute  d-flex flex-column align-items-center rounded-4">
                    
                            <div class="py-4">
                                <h1 class="light-color ">Log In</h1>
                            </div>
                    <div class="w-50 login-form d-flex flex-column align-items-center">
                            <form class="w-100 " [formGroup]="loginForm" (ngSubmit)="signin()">
                                @if (errorMsg) {
                                    <div class="alert alert-danger rounded-3" role="alert">
                                        <p class="fs-5 mb-0"><i class="fa-solid fa-triangle-exclamation mx-2"></i>Error : {{errorMsg}}</p>
                                      </div>
                                }
                                
                                <div class="d-flex flex-column align-items-center w-100 ">
                                    @if (loginForm.get("email")?.errors && loginForm.get("email")?.touched) {
                                        <div class="alert alert-danger rounded-3 " role="alert">
                                            @if (loginForm.get("email")?.getError("required")) {
                                                <p class="fs-6 mb-0"><i class="fa-solid fa-triangle-exclamation mx-2"></i>Email can't be null or empty !</p>
                                            }
                                            @else if (loginForm.get("email")?.getError("email")) {
                                                <p class="fs-6 mb-0"><i class="fa-solid fa-triangle-exclamation mx-2"></i>your Email must be email </p>
                                            }
                                          </div>
                                    }
                                    <div class="py-4 w-100 position-relative d-flex align-items-center">
                                        <input type="email" placeholder="Email" formControlName = "email">
                                        <i class="fa-regular fa-user icon"></i>
                                        
                                    </div>
                                    @if (loginForm.get("password")?.errors && loginForm.get("password")?.touched) {
                                        <div class="alert alert-danger rounded-3 " role="alert">
                                            @if (loginForm.get("password")?.getError("required")) {
                                                <p class="fs-6 mb-0"><i class="fa-solid fa-triangle-exclamation mx-2"></i>password can't be null or empty !</p>
                                            }
                                            @else if (loginForm.get("password")?.getError("pattern")) {
                                                <p class="fs-6 mb-0"><i class="fa-solid fa-triangle-exclamation mx-2"></i>your password must have at least one capital character and one least  private code and one number from 0 to 9 and can't be less than 8 characters</p>
                                            }
                                          </div>
                                    }
                                    <div class="py-4 w-100 position-relative d-flex align-items-center">
                                        <input type="password" placeholder="Password" formControlName = "password">
                                        <i class="fa-solid fa-lock icon"></i>
                                    </div>
                                   
                                </div>
                                <div class="text-center my-4">
                                    <a routerLink="/forgetPassword" class="my-2 light-color ">
                                        forget password ?
                                    </a>
                                </div>
                                <div class=" my-2 text-center">
                                    <button type="submit" class="w-75 btn-submit" [disabled]="loginForm.invalid || loading">
                                        @if (loading) {
                                             Loading...<i class="fa-solid fa-spin fa-spinner"></i>
                                          } @else {
                                            Log In
                                          }
                                        </button>
                                </div>
                                <div class=" my-2 text-center light-color ">
                                    <p>
                                        Don't have an account ? 
                                        <a routerLink="/register" class="light-color "> Sign Up</a>
                                    </p>
                                </div>
                               
                            </form>
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
